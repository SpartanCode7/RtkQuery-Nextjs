{"version":3,"sources":["../../src/server/next.ts"],"names":["log","loadConfig","resolve","NON_STANDARD_NODE_ENV","PHASE_DEVELOPMENT_SERVER","PHASE_PRODUCTION_SERVER","getTracer","NextServerSpan","ServerImpl","getServerImpl","undefined","Promise","require","default","NextServer","constructor","options","hostname","port","getRequestHandler","req","res","parsedUrl","trace","requestHandler","getServerRequestHandler","getUpgradeHandler","socket","head","server","getServer","handleUpgrade","apply","setAssetPrefix","assetPrefix","preparedAssetPrefix","logError","args","render","renderToHTML","renderError","renderErrorToHTML","render404","serveStatic","prepare","dev","close","createServer","ServerImplementation","preloadedConfig","dir","conf","_renderWorker","serverPromise","then","output","warn","Error","experimental","appDir","process","env","NEXT_PREBUNDLED_REACT","reqHandlerPromise","wrap","bind","typescript","createTSPlugin","NODE_ENV","includes","console","module","exports"],"mappings":"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"}