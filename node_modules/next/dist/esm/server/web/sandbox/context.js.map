{"version":3,"sources":["../../../../src/server/web/sandbox/context.ts"],"names":["AsyncLocalStorage","decorateServerError","getServerError","COMPILER_NAMES","EDGE_UNSUPPORTED_NODE_APIS","EdgeRuntime","readFileSync","promises","fs","validateURL","pick","fetchInlineAsset","runInContext","BufferImplementation","EventsImplementation","AssertImplementation","UtilImplementation","AsyncHooksImplementation","WEBPACK_HASH_REGEX","moduleContexts","Map","pendingModuleCaches","clearModuleContext","path","content","handleContext","key","cache","context","prev","paths","get","replace","toString","delete","loadWasm","wasm","modules","Promise","all","map","binding","module","WebAssembly","compile","readFile","filePath","name","buildEnvironmentVariablesFrom","keys","pairs","process","env","Object","fromEntries","NEXT_RUNTIME","throwUnsupportedAPIError","error","Error","edgeServer","createProcessPolyfill","options","processPolyfill","overridenValue","defineProperty","undefined","set","value","enumerable","addStub","getDecorateUnhandledError","runtime","EdgeRuntimeError","evaluate","getDecorateUnhandledRejection","rejected","reason","NativeModuleMap","mods","entries","createModuleContext","warnedEvals","Set","warnedWasmCodegens","edgeFunctionEntry","codeGeneration","NODE_ENV","strings","extend","WebSocket","Number","version","split","substring","require","id","TypeError","__next_eval__","fn","has","warning","captureStackTrace","add","onWarning","__next_webassembly_compile__","__next_webassembly_instantiate__","result","instantiatedFromBuffer","hasOwnProperty","__fetch","fetch","input","init","callingError","assetResponse","assets","distDir","headers","Headers","prevs","concat","moduleName","join","response","url","String","catch","err","message","stack","__Request","Request","constructor","next","__redirect","Response","redirect","bind","args","assign","decorateUnhandledError","addEventListener","decorateUnhandledRejection","getModuleContextShared","deferredModuleContext","getModuleContext","lazyModuleContext","useCache","moduleContext","evaluateInContext","filepath","filename"],"mappings":"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"}