{"version":3,"sources":["../../../src/server/response-cache/index.ts"],"names":["ResponseCache","constructor","minimalMode","pendingResponses","Map","get","key","responseGenerator","context","incrementalCache","pendingResponseKey","isOnDemandRevalidate","pendingResponse","resolver","rejecter","promise","Promise","resolve","reject","set","resolved","cacheEntry","previousCacheItem","expiresAt","Date","now","entry","delete","cachedResponse","value","kind","Error","isStale","revalidate","curRevalidate","html","RenderResult","fromStatic","pageData","isPrefetch","resolveValue","isMiss","toUnchunkedString","undefined","err","Math","min","max","console","error"],"mappings":"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"}